<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Freeze Dance Text Game</title>
<style>
  body {
    font-family: Arial, sans-serif;
    max-width: 400px;
    margin: 50px auto;
    text-align: center;
  }
  button {
    font-size: 20px;
    padding: 10px 20px;
    margin-top: 20px;
    cursor: pointer;
  }
  #status {
    font-size: 24px;
    margin-top: 30px;
    min-height: 40px;
  }
</style>
</head>
<body>

<h1>Freeze Dance</h1>
<p>Press Start. When it says "Move", tap the Move button fast! When it says "Freeze", donâ€™t tap anything.</p>

<button id="startBtn">Start Game</button>
<button id="moveBtn" disabled>Move!</button>

<div id="status"></div>
<div id="score" style="font-size:20px; margin-top:20px;"></div>

<script>
const startBtn = document.getElementById('startBtn');
const moveBtn = document.getElementById('moveBtn');
const status = document.getElementById('status');
const scoreDisplay = document.getElementById('score');

let gameRunning = false;
let isMovePhase = false;
let score = 0;
let timer;

startBtn.addEventListener('click', startGame);
moveBtn.addEventListener('click', registerMove);

function startGame() {
  gameRunning = true;
  score = 0;
  status.textContent = '';
  scoreDisplay.textContent = 'Score: 0';
  startBtn.disabled = true;
  moveBtn.disabled = false;
  nextPhase();
}

function nextPhase() {
  if (!gameRunning) return;

  isMovePhase = Math.random() < 0.6; // 60% chance to be move phase
  status.textContent = isMovePhase ? 'MOVE! Tap Move fast!' : 'FREEZE! Don\'t tap!';

  if (isMovePhase) {
    // Player must tap Move button many times within 3 seconds
    let moves = 0;
    let moveTimeout = setTimeout(() => {
      if (moves >= 5) {
        score++;
        scoreDisplay.textContent = 'Score: ' + score;
        nextPhase();
      } else {
        endGame('Too slow! You lost.');
      }
    }, 3000);

    moveBtn.onclick = () => {
      if (!gameRunning || !isMovePhase) return;
      moves++;
      if (moves >= 5) {
        clearTimeout(moveTimeout);
        score++;
        scoreDisplay.textContent = 'Score: ' + score;
        nextPhase();
      }
    };
  } else {
    // Freeze phase: player must NOT tap Move button for 3 seconds
    let freezeTimeout = setTimeout(() => {
      if (gameRunning) nextPhase();
    }, 3000);

    moveBtn.onclick = () => {
      if (!gameRunning || isMovePhase) return;
      clearTimeout(freezeTimeout);
      endGame('You moved during freeze! Game over.');
    };
  }
}

function registerMove() {
  // This is just a fallback for manual clicks outside phase logic
}

function endGame(msg) {
  gameRunning = false;
  status.textContent = msg;
  moveBtn.disabled = true;
  startBtn.disabled = false;
}
</script>

</body>
</html>
